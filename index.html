<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>مولد السيرة الذاتية</title>
  <style>
    body { font-family: Arial; background: #f8f8f8; padding: 20px; }
    .container { max-width: 800px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; }
    .section { margin-bottom: 20px; }
    label { display: block; margin: 10px 0 5px; }
    input, textarea, select { width: 100%; padding: 8px; margin-bottom: 10px; }
    .btn { background: #007bff; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; }
    .btn:hover { background: #0056b3; }
    .options { margin-bottom: 10px; }
    .hide-option { margin-bottom: 10px; }
    .cv-output { border: 1px solid #ccc; padding: 15px; background: #f9f9f9; margin-top: 20px; }
    .back-btn, .download-btn, .share-btn { margin-right: 10px; }
  </style>
</head>
<body>

<div class="container" id="form-container">
  <h2>مولد السيرة الذاتية</h2>

  <div class="options">
    <label><input type="checkbox" class="hide-option" value="photo"> إخفاء الصورة</label>
    <label><input type="checkbox" class="hide-option" value="skills"> إخفاء المهارات</label>
    <label><input type="checkbox" class="hide-option" value="phone"> إخفاء رقم الهاتف</label>
    <label><input type="checkbox" class="hide-option" value="languages"> إخفاء اللغات</label>
  </div>

  <div class="section"><label>الاسم الكامل</label><input type="text" id="name"></div>
  <div class="section"><label>البريد الإلكتروني</label><input type="email" id="email"></div>
  <div class="section"><label>رقم الهاتف</label><input type="tel" id="phone"></div>
  <div class="section"><label>الصورة</label><input type="file" id="photo" accept="image/*"></div>
  <div class="section"><label>النبذة التعريفية</label><textarea id="summary"></textarea></div>
  <div class="section"><label>المهارات</label><textarea id="skills"></textarea></div>
  <div class="section">
    <label>اللغات ومدى الإتقان (مثال: الفرنسية - جيد جدا)</label>
    <textarea id="languages"></textarea>
  </div>

  <button class="btn" onclick="generateCV()">إنشاء السيرة الذاتية</button>
</div>

<div class="container" id="cv-container" style="display:none;">
  <h2>السيرة الذاتية</h2>
  <div id="cv" class="cv-output"></div>
  <button class="btn back-btn" onclick="goBack()">رجوع</button>
  <button class="btn download-btn" onclick="downloadCV()">تحميل</button>
  <button class="btn share-btn" onclick="shareCV()">مشاركة</button>
</div>

<script>
function generateCV() {
  const hideOptions = [...document.querySelectorAll('.hide-option:checked')].map(el => el.value);
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const phone = document.getElementById("phone").value;
  const summary = document.getElementById("summary").value;
  const skills = document.getElementById("skills").value;
  const languages = document.getElementById("languages").value;
  const photoFile = document.getElementById("photo").files[0];

  let html = `<p><strong>الاسم:</strong> ${name}</p>`;
  html += `<p><strong>البريد الإلكتروني:</strong> ${email}</p>`;
  if (!hideOptions.includes("phone")) html += `<p><strong>رقم الهاتف:</strong> ${phone}</p>`;
  if (!hideOptions.includes("photo") && photoFile) {
    const reader = new FileReader();
    reader.onload = function(e) {
      html = `<img src="${e.target.result}" style="max-width:150px;"><br>` + html;
      document.getElementById("cv").innerHTML = html;
    }
    reader.readAsDataURL(photoFile);
  } else {
    if (!hideOptions.includes("photo")) html += `<p><em>لم يتم تحميل صورة</em></p>`;
    document.getElementById("cv").innerHTML = html;
  }

  html += `<p><strong>النبذة:</strong> ${summary}</p>`;
  if (!hideOptions.includes("skills")) html += `<p><strong>المهارات:</strong> ${skills}</p>`;
  if (!hideOptions.includes("languages")) html += `<p><strong>اللغات:</strong> ${languages}</p>`;

  if (hideOptions.includes("photo") || !photoFile) {
    document.getElementById("cv").innerHTML = html;
  }

  document.getElementById("form-container").style.display = "none";
  document.getElementById("cv-container").style.display = "block";
}

function goBack() {
  document.getElementById("cv-container").style.display = "none";
  document.getElementById("form-container").style.display = "block";
}

function downloadCV() {
  const content = document.getElementById("cv").innerHTML;
  const blob = new Blob([content], { type: "text/html" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "cv.html";
  link.click();
}

function shareCV() {
  if (navigator.share) {
    navigator.share({
      title: "سيرتي الذاتية",
      text: "اطلع على سيرتي الذاتية",
      url: window.location.href
    }).catch(err => alert("فشل المشاركة: " + err));
  } else {
    alert("المشاركة غير مدعومة في هذا المتصفح.");
  }
}
</script>

</body>
</html>
